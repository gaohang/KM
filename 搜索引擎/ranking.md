## 样本

若样本数量少，不考虑采样。否则，可考虑采样方法如下：

- ​	若样本够多，只使用手动搜索样本即可（搜索类型：手动打字、历史搜索、联想搜索、热词搜索）
- ​	排除没有点击行为的搜索



## 特征

注意：只要是率特征，都要做平滑

### query 特征

（不重要，但要有，否则无法在线推理）

query id  (分词 or 不分词）



### item 特征

（比较重要，反映了内容热度）

热度特征：长中短期（歌曲、歌手、专辑、歌单）的（播放/收藏/分享/下载）统计特征（次数，率）

位置pos特征：训练时有，推理时缺失；作用：提升pos靠后但被点击的点击概率



### 共现 特征

（最重要，反映了查询与内容的匹配度）

<query id, item id> N day ctr

- 用平均点击曝光做平滑，防止exp=1&click=1，防止exp=0
- 考虑 pos（i.e.  <query id, item id，pos>）  或  只考虑topK共现

<query text，item text>文本相似度

- 搜索词与歌名相似度
- 搜索词与歌名、专辑名、歌手名的 最大文本相似度

### ctr 贝叶斯平滑

https://blog.csdn.net/jinping_shi/article/details/78334362

![image-20200412090743504](D:\Users\11109539\KM\搜索引擎\img\image-20200412090743504.png)

## 模型